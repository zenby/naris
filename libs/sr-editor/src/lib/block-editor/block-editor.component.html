<div class="row">
  <div class="info">
    {{ textBlock.type | typeFormat }}
    {{ isEdit | booleanToString: ' [*]':' [ ]' }}
  </div>
  <div (click)="onSelectBlock()" class="edit">
    <ng-container *ngIf="isEdit">
      <textarea
        class="block-editor"
        [(ngModel)]="textBlock.text"
        (blur)="onEndEdit()"
        (ngModelChange)="textChange($event)"
        (keydown)="command($event)"
        #edit
        soerAutoresize
      >
      </textarea>
      <p class="help">
        (EDIT:{{ localIndex }}) Alt-1,2,3 - markdown, test, presentation Alt-Enter - новый блок, Alt-Backspace - удалить
        блок, Alt-Up/Down - сдвинуть блок, Esc - конец редактирования
      </p>
    </ng-container>

    <ng-container *ngIf="!isEdit">
      <div class="block-editor" (click)="isEdit = true">
        <ng-container [ngSwitch]="textBlock.type">
          <ng-container *ngSwitchCase="'markdown'">
            <soer-markdown-block [text]="textBlock.text"></soer-markdown-block>
          </ng-container>

          <ng-container *ngSwitchCase="'test'">
            <soer-test-block [text]="textBlock.text"></soer-test-block>
          </ng-container>

          <ng-container *ngSwitchCase="'code'">
            <soer-code-block [text]="textBlock.text"></soer-code-block>
          </ng-container>
        </ng-container>
      </div>
    </ng-container>
  </div>
</div>
