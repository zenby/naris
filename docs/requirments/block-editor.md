# Требования к блочному редактору v.0.0.4

# Цели 

БЦ-1: Разработка собственного инструментария для работы над документами



## Критерии успеха

КУ-1: Вместо сторонних инструментов используется собственный блочный редактор

# Функциональные требования

## Общее описание

Блочный редактор - это редактор в котором редактирование происходит на уровне блоков. При этом блоки на уровне структуры данных отделены друг от друга, каждый блок имеет свою семантику и может отображаться по-разному. Конечный документ строится из набора блоков.

## Режимы работы

У редактора есть два режима функционирования:

- Режим редактирования
- Режим просмотра

**Режим редактирования** служит для создания и описания метаинформации блоков.

**Режим просмотра** служит для отображения содержимого блока в соответствии с его типом.

## Сущности

**Документ** - итоговый документ для редактирования, который включает в себе всю информацию (мета, блоки и т.д.)

**Контент** - "полезная" информация документа

**Мета информация** - информация, необходимая для обработки и отображения контента

**Блок** - элемент документа подлежащий редактированию, содержащий контент и метаинформацию

**Тип блока** - часть метаинформации блока, содержащей семантический смысл блока

### Редактор должен позволять:

- редактировать документ путем создания и удаления блоков
- предоставлять визуальные средства управления процессом редактирования
- предоставлять всю мета информацию о редактируемых блоках
- создавать блоки разных типов:
   - markdown 
   - code (исходники скриптов и программ)
      + в режиме отображения код форматируется и показывается значок "выполнить код"
      + код должен оформляться цветом и форматироваться
      + в метаинформации должен фиксироваться интерпретатор кода
   - test блок со списком вопросов и пометкой правильных ответов
      + в режиме просмотра можно щелкнуть по вопросу и узнать правильный ли ответ дан
- редактор должен иметь возможность использовать библиотеку изображений


### Варианты использования

#### Пустой документ (создание документа)

- форма редактора отображает пустой заголовок и  один пустой блок
- блок может быть "активным", тогда его содержимое отображается как форма редактирования
- блок может быть неактивным, тогда его содержимое отображается в режиме "превью"
- вокруг блока отображается метоинформация:
  - тип блока
  - подсказки по возможным действиям
- вокруг блока размещается тулбар содержащий возможность выполнения следующих действий:
  - добавить блок ниже/выше
  - переместить блок вверх/вниз
  - удалить блок

#### Созданный документ (редактирование документа)

Документ отображается так же как и пустой документ, за исключением начального отображения, которое включает все блоки сохраненного документа.

#### Библиотека изображений

В режиме создания и редактирования редактор должен обеспечивать вставку изображений, которое делается в виде выбора соответствующего изображения из галереи.


# Нефункциональные требования

## Модель поведения

- Редактор интегрируется в приложение как модуль
- Свойства редактора определяются родительским приложением, свойства включают:
   - Библиотеку изображений
   - блоки документа, которые включают:
      - содержимое блока
      - метаинформацию блока
   -  мета информацию документа


# Производные требования

Так как функция редактирования является часто используемой в разных приложениях, то код может быть повторно использован в разных приложениях.

Решение должно быть выполнено в виде отдельного модуля и использоваться как библиотечное решение.

## UI

Должна быть реализована возможность копировать в блоки через буфер обмена, при этом редактор должен отслеживать добавление картинок через буфер обмена и генерировать событие на сохранение.
